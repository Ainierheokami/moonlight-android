### 外观 Tab（Appearance）内容与编排规划

#### 设计目标
- 快速上手：高频设置优先展示，减少滚动与切换成本。
- 所见即所得：与预览页签配合，修改后立即反映（外观 Tab 内不再重复展示预览）。
- 一致与紧凑：统一行高/间距/色块尺寸/标签字号；分组清晰，开关控制次要项显示。

#### 用户任务路径（从上到下）
0) 全局状态切换（Normal｜Pressed）
1) 文本（Text）
2) 背景（Background）
3) 描边（Stroke）
4) 形状与透明度（Shape & Opacity）
5) 样式管理（Style Actions）
6) 高级（Advanced，可折叠）

#### 分组与字段清单（建议默认展开/折叠）

- 文本（展开，受全局状态切换控制）
  - 字体颜色（色块 + 十六进制输入）[Normal/Pressed]
  - 字体透明度（0~100% 滑杆）[Normal/Pressed]

- 背景（展开，受全局状态切换控制）
  - 背景颜色（色块 + Hex）[Normal/Pressed]
  - 背景透明度（0~100% 滑杆）[Normal/Pressed]
  - 说明：若启用“全局覆盖色”（高级），覆盖于此计算结果之上。

- 描边（展开，受全局状态切换控制）
  - 开关：启用描边
  - 宽度（px 滑杆，默认单一值；可在“高级”里开启按下态独立宽度）
  - 颜色（色块 + Hex）[Normal/Pressed]
  - 透明度（0~100% 滑杆）[Normal/Pressed]

- 形状与透明度（展开）
  - 圆角半径（滑杆）
  - 整体不透明度（滑杆，作用于基础填充色，未显式设置背景覆盖时生效）

- 样式管理（展开，置底）
  - 复制外观样式
  - 粘贴外观样式
  - 应用到相同组
  - 粘贴到表单（仅填充表单，不立即保存）

- 高级（默认折叠）
  - 整体覆盖色（开关）
    - 覆盖颜色（常态/按下，色块 + Hex）
    - 覆盖透明度（0~100% 滑杆）
  - 说明：开启后覆盖背景计算结果，常用于全局着色或主题化处理。

#### 颜色选择器（统一入口与体验）
- 触发：点击任一色块弹窗。
- 弹窗 Tab：
  - 色板：预设常用色，一点即用；
  - 色轮：左半圆形色轮（H/S），右半滑杆（V/A），色轮高度 160~200dp；右侧保留可滚动区域。
  - 触控：仅在命中色轮时拦截滚动；其它区域保持页面可滚动。

#### 全局状态切换交互细节（新增）
- 控件形态：两段式切换（Normal｜Pressed），置于外观 Tab 顶部；同一切换控制“文本/背景/描边”三组的编辑上下文。
- 状态记忆：会话内记住上次停留状态。
- 快捷操作：提供“用常态值填充按下”、“用按下值覆盖常态”的镜像操作（可放在切换控件附近的更多菜单中）。
- 预览联动：预览页签双预览（Normal/Pressed）同时更新。
- 确认即写回十六进制与色块；输入框变更与预览联动。

#### 交互与可用性细节
- 分组标题与内容间距 6~8dp；组间距 8dp；控件最小触控高度 48dp。
- 色轮仅在命中圆盘时拦截滚动，非命中区域可上下滑动。
- 数值校验：Hex 输入实时校验；滑杆范围钳制；错误提示中文化。

#### 屏幕适配建议
- 手机竖屏：单列纵向（上述顺序），背景采用“双小节 常态/按下”。
- 平板/横屏：两列布局（可选）：左列 文本/背景；右列 描边/形状透明度/高级；底部横向“样式管理”。

#### 命名与文案（建议）
- 文本颜色 → 字体颜色
- 背景颜色（常态）/（按下）
- 描边 → 边框（如更贴近通用用语）
- 整体不透明度 → 全局不透明度
- 整体覆盖色（高级）→ 全局覆盖色（高级）

#### 落地步骤（实现顺序）
1) 在外观 Tab 顶部加入“全局状态切换（Normal｜Pressed）”，移除各组内重复的状态切换；
2) 文本/背景/描边三组的颜色与透明度字段统一受全局切换控制；
3) 迁移“样式管理”至外观 Tab 底部，并收紧分组内部间距（已部分完成）。
3) 统一色块弹窗为“色板/色轮”双 Tab，限制色轮高度与左右布局。
4) 校验联动逻辑：整体不透明度与背景覆盖/覆盖色的优先级一致。
5) 适配大屏两列布局（次阶段）。

