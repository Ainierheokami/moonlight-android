### 双击按钮编辑菜单修复记录（2025-08-10）

本次修复围绕“虚拟键盘按钮编辑菜单（双击弹出）”的四个问题展开：

- 预览对不上（没有文字）
- 无法切换触摸板
- 无法切换手柄按键
- 似乎无法正常保存配置

#### 变更概览

1) 预览面板重构（含文字）
- 文件：`app/src/main/java/com/limelight/heokami/VirtualKeyboardMenu.kt`
- 将原来的单一矩形预览替换为 `FrameLayout(背景) + TextView(文字)`，并使预览计算与 `DigitalButton.onElementDraw()` 的渲染逻辑一致（包含：背景正常/按下色、BG_ALPHA/BG_ALPHA_PRESSED、整体覆盖 OVERALL_*、圆角、描边、文本颜色与透明度）。
- 统一绑定监听以在参数变化时实时更新预览，包括：文本、颜色、透明度、圆角、整体覆盖、描边等。

2) 类型切换即时生效（触摸板/手柄/按钮）
- 编辑态保存时，除了落盘，还调用 `virtualKeyboard.refreshLayout()`，以从配置重建元素，确保 `TYPE=TouchPad/JoyStick/Button` 的子类正确实例化（此前仅修改了字段，未重建视图，导致触摸板切换“无效”）。

3) 手柄按键映射增强
- 文件：`app/src/main/java/com/limelight/binding/input/virtual_keyboard/VirtualKeyboardConfigurationLoader.java`
- `JoyStick` 路径下新增对数值字符串（如历史保存的整型位标志字符串“4096”）的解析；若为数字，直接作为控制位使用；否则回退到 A/B/X/Y/LB/RB/BACK/START 的名称映射。解决“无法切换手柄按键”以及恢复旧配置不生效的问题。

4) 配置保存时机优化（新增/复制/删除/分组删除）
- `VirtualKeyboardMenu.kt` 中对以下操作追加即时 `saveProfile(...)`：
  - 新增按钮确认后保存
  - 复制按钮后保存
  - 删除单个按钮后保存
  - 删除分组按钮后保存
- 编辑态“保存”时亦保存并刷新布局。

#### 影响范围与注意事项
- 变更仅涉及编辑弹窗与配置 Loader，不影响运行时输入处理逻辑。
- 触摸板灵敏度字段 `TOUCHPAD_SENSITIVITY` 仍按原方案保存于 `BUTTON_DATA`，目前未有消费逻辑；后续如需生效，可于 `TouchPad` 实现中读取。
- UI 语义保持：
  - 新增模式：正向按钮“确认”
  - 编辑模式：正向按钮“删除”，中立按钮“保存”，负向按钮“取消”

#### 相关文件
- `VirtualKeyboardMenu.kt`
- `VirtualKeyboardConfigurationLoader.java`
- `DigitalButton.java`（渲染参考，无改动）

