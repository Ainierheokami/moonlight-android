<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/floating_keyboard_bg"
    android:padding="8dp"
    android:minWidth="600dp"
    android:maxWidth="800dp">

    <!-- 顶部功能条 -->
    <LinearLayout
        android:id="@+id/function_bar"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:orientation="horizontal"
        android:background="@drawable/function_bar_bg"
        android:gravity="center_vertical"
        android:paddingStart="8dp"
        android:paddingEnd="8dp"
        android:layout_marginBottom="4dp">

        <!-- 移动按钮 -->
        <ImageButton
            android:id="@+id/btn_move_keyboard"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:background="@drawable/function_button_bg"
            android:src="@drawable/ic_move"
            android:contentDescription="移动键盘"
            android:layout_marginEnd="4dp" />

        <!-- 数字键盘切换 -->
        <ImageButton
            android:id="@+id/btn_toggle_numeric"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:background="@drawable/function_button_bg"
            android:src="@drawable/ic_numeric"
            android:contentDescription="数字键盘"
            android:layout_marginEnd="4dp" />

        <!-- 功能键切换 -->
        <ImageButton
            android:id="@+id/btn_toggle_function"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:background="@drawable/function_button_bg"
            android:src="@drawable/ic_function"
            android:contentDescription="功能键"
            android:layout_marginEnd="4dp" />

        <!-- 设置按钮 -->
        <ImageButton
            android:id="@+id/btn_settings"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:background="@drawable/function_button_bg"
            android:src="@drawable/ic_settings"
            android:contentDescription="设置"
            android:layout_marginEnd="4dp" />

        <!-- 弹性空间 -->
        <View
            android:layout_width="0dp"
            android:layout_height="1dp"
            android:layout_weight="1" />

        <!-- 关闭按钮 -->
        <ImageButton
            android:id="@+id/btn_close_keyboard"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:background="@drawable/function_button_bg"
            android:src="@drawable/ic_close"
            android:contentDescription="关闭键盘" />

    </LinearLayout>

    <!-- 键盘主体区域 -->
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:maxHeight="400dp">

        <LinearLayout
            android:id="@+id/keyboard_container"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:baselineAligned="false">

            <!-- 第一行：ESC F1-F12 -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false">

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x1B"
                    android:text="ESC" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x70"
                    android:text="F1" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x71"
                    android:text="F2" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x72"
                    android:text="F3" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x73"
                    android:text="F4" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x74"
                    android:text="F5" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x75"
                    android:text="F6" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x76"
                    android:text="F7" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x77"
                    android:text="F8" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x78"
                    android:text="F9" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x79"
                    android:text="F10" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x7A"
                    android:text="F11" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x7B"
                    android:text="F12" />

            </LinearLayout>

            <!-- 第二行：数字键 -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false">

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xC0"
                    android:text="`" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x31"
                    android:text="1" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x32"
                    android:text="2" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x33"
                    android:text="3" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x34"
                    android:text="4" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x35"
                    android:text="5" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x36"
                    android:text="6" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x37"
                    android:text="7" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x38"
                    android:text="8" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x39"
                    android:text="9" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x30"
                    android:text="0" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xBD"
                    android:text="-" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xBB"
                    android:text="=" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.5"
                    android:tag="0x08"
                    android:text="←" />

            </LinearLayout>

            <!-- 第三行：QWERTY -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false">

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.2"
                    android:tag="0x09"
                    android:text="Tab" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x51"
                    android:text="Q" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x57"
                    android:text="W" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x45"
                    android:text="E" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x52"
                    android:text="R" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x54"
                    android:text="T" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x59"
                    android:text="Y" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x55"
                    android:text="U" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x49"
                    android:text="I" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x4F"
                    android:text="O" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x50"
                    android:text="P" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xDB"
                    android:text="[" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xDD"
                    android:text="]" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xDC"
                    android:text="\" />

            </LinearLayout>

            <!-- 第四行：ASDF -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false">

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.4"
                    android:tag="0x14"
                    android:text="Caps" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x41"
                    android:text="A" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x53"
                    android:text="S" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x44"
                    android:text="D" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x46"
                    android:text="F" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x47"
                    android:text="G" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x48"
                    android:text="H" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x4A"
                    android:text="J" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x4B"
                    android:text="K" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x4C"
                    android:text="L" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xBA"
                    android:text=";" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xDE"
                    android:text="'" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.6"
                    android:tag="0x0D"
                    android:text="Enter" />

            </LinearLayout>

            <!-- 第五行：ZXCV -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false">

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.6"
                    android:tag="0xA0"
                    android:text="Shift" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x5A"
                    android:text="Z" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x58"
                    android:text="X" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x43"
                    android:text="C" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x56"
                    android:text="V" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x42"
                    android:text="B" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x4E"
                    android:text="N" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x4D"
                    android:text="M" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xBC"
                    android:text="," />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xBE"
                    android:text="." />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xBF"
                    android:text="/" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.6"
                    android:tag="0xA1"
                    android:text="Shift" />

            </LinearLayout>

            <!-- 第六行：空格行 -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false">

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.2"
                    android:tag="0xA2"
                    android:text="Ctrl" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x5B"
                    android:text="Win" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xA4"
                    android:text="Alt" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="6"
                    android:tag="0x20"
                    android:text="Space" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0xA5"
                    android:text="Alt" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x5C"
                    android:text="Win" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1.2"
                    android:tag="0xA3"
                    android:text="Ctrl" />

            </LinearLayout>

            <!-- 第七行：方向键 -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:baselineAligned="false"
                android:gravity="center">

                <View
                    android:layout_width="0dp"
                    android:layout_height="1dp"
                    android:layout_weight="3" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x25"
                    android:text="←" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x28"
                    android:text="↓" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x26"
                    android:text="↑" />

                <Button
                    style="@style/FloatingKeyboardButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:tag="0x27"
                    android:text="→" />

                <View
                    android:layout_width="0dp"
                    android:layout_height="1dp"
                    android:layout_weight="3" />

            </LinearLayout>

        </LinearLayout>
    </ScrollView>

</LinearLayout> 